<div class="payment-container">

  <h2 class="payment-title">
  Datos de pago - {{ data.method === 'CARD' ? ' Tarjeta' : ' Efectivo' }}
  </h2>
  <!-- Detalles de la reserva -->
  <div class="reservation-details" *ngIf="courtName">
    <h3>Detalles de la reserva</h3>
    <p><strong>Cancha:</strong> {{ courtName }}</p>
    <p><strong>Horario:</strong> {{ startTime }} - {{ endTime }}</p>
    <p><strong>Precio por hora:</strong> ${{ pricePerHour }}</p>
    <p><strong>Total a pagar:</strong> ${{ totalPrice }}</p>
  </div>

  <!-- Formulario de pago -->
  <form [formGroup]="form" (ngSubmit)="submit()" class="payment-form">

    <!-- Nombre -->
    <mat-form-field appearance="fill" class="full-width">
      <mat-label>Nombre completo</mat-label>
      <input matInput formControlName="customerName" placeholder="Ej: Juan P茅rez">
      <mat-error *ngIf="form.get('customerName')?.hasError('required')">
        El nombre es obligatorio
      </mat-error>
    </mat-form-field>

    <!-- Correo -->
    <mat-form-field appearance="fill" class="full-width">
      <mat-label>Correo electr贸nico</mat-label>
      <input matInput formControlName="customerEmail" type="email" placeholder="ejemplo@correo.com">
      <mat-error *ngIf="form.get('customerEmail')?.hasError('required')">
        El correo es obligatorio
      </mat-error>
      <mat-error *ngIf="form.get('customerEmail')?.hasError('email')">
        Ingresa un correo v谩lido
      </mat-error>
    </mat-form-field>

    <!-- Tel茅fono -->
    <mat-form-field appearance="fill" class="full-width">
      <mat-label>Tel茅fono</mat-label>
      <input matInput formControlName="customerPhone" type="tel" placeholder="Ej: 7123-4567">
      <mat-error *ngIf="form.get('customerPhone')?.hasError('required')">
        El tel茅fono es obligatorio
      </mat-error>
    </mat-form-field>

    <!-- Campos adicionales si es tarjeta -->
    <div *ngIf="data.method === 'CARD'" class="card-fields">
      <!-- N煤mero de tarjeta -->
      <mat-form-field appearance="fill" class="full-width">
        <mat-label>N煤mero de tarjeta</mat-label>
        <input
          matInput
          formControlName="cardNumber"
          maxlength="19"
          placeholder="1234 5678 9012 3456"
          (input)="formatCardNumber($event)"
        >
        <mat-error *ngIf="form.get('cardNumber')?.hasError('required')">
          El n煤mero de tarjeta es obligatorio
        </mat-error>
        <mat-error *ngIf="form.get('cardNumber')?.hasError('invalidCardNumber')">
          Debe contener 16 d铆gitos v谩lidos
        </mat-error>
      </mat-form-field>

      <!-- Expiraci贸n -->
      <mat-form-field appearance="fill" class="full-width">
        <mat-label>Fecha de expiraci贸n</mat-label>
        <input
          matInput
          formControlName="cardExpiry"
          placeholder="MM/YY"
          maxlength="5"
          (input)="formatCardExpiry($event)"
        >
        <mat-error *ngIf="form.get('cardExpiry')?.hasError('required')">
          La fecha de expiraci贸n es obligatoria
        </mat-error>
        <mat-error *ngIf="form.get('cardExpiry')?.hasError('invalidExpiry')">
          La tarjeta ya expir贸 o el formato es inv谩lido
        </mat-error>
      </mat-form-field>
    </div>

    <!-- Bot贸n de confirmaci贸n -->
    <button mat-raised-button color="primary" type="submit" [disabled]="form.invalid">
      Confirmar Pago
    </button>
  </form>
</div>
